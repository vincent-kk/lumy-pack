# 리스크 및 완화 전략

> 원본: PLAN.md §5 | 관련: [02-PHASES.md](./02-PHASES.md)

## 5. 리스크 및 완화 전략

| 리스크                                         | 영향                                   | 완화 전략                                                                                                                |
| ---------------------------------------------- | -------------------------------------- | ------------------------------------------------------------------------------------------------------------------------ |
| 상태 머신이 과도한 컨텍스트를 소비             | LLM 성능 저하                          | 의장 위임 패턴으로 Phase A/B를 subagent에 분리, 의장 컨텍스트 ~1,130줄 이내 유지                                         |
| 기존 MCP tool이 code-review에 부족한 정보 제공 | 기술 검증 품질 저하                    | Phase B subagent에서 MCP tool 호출 결과 검증 후, 부족 시 보조 tool 추가 검토                                             |
| 부채 파일이 과도하게 누적                      | 디스크/커밋 부담                       | 부채 가중치 상한선(cap=16) + 주기적 정리 안내                                                                            |
| 브랜치 이름 정규화 엣지 케이스                 | 디렉토리 매칭 실패                     | `review-manage(normalize-branch)` MCP tool로 결정론적 처리, Phase 1에서 충분한 엣지 케이스 테스트                        |
| Phase A/B subagent 실행 실패                   | 리뷰 중단                              | `review-manage(checkpoint)` 기반 재개 로직으로 실패 지점부터 재시작 + `--force`로 강제 초기화 가능                       |
| `gh` CLI 미설치/미인증 환경                    | PR 코멘트 게시 불가                    | 환경 의존적 graceful degradation — `gh auth status` 실패 시 skip하고 로컬 파일 출력만 수행. 핵심 리뷰 기능에는 영향 없음 |
| `CLAUDE_PLUGIN_ROOT` 환경변수 미설정           | Phase A/B 프롬프트 파일 경로 해결 실패 | Glob fallback (`**/skills/code-review/phases/*.md`) + 에러 메시지에 수동 경로 지정 안내                                  |
| 리뷰 완료 후 재리뷰 필요 시 경로 미정의        | 사용자 혼란                            | `--force` 옵션으로 기존 리뷰 파일 삭제 후 Phase A 재시작. 체크포인트 "DONE" 상태에서 안내 메시지 출력                    |
