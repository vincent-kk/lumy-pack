#!/usr/bin/env node
import{createHash as h}from"node:crypto";import{existsSync as u,mkdirSync as F,readFileSync as k,readdirSync as D,statSync as I,unlinkSync as a,writeFileSync as $}from"node:fs";import{homedir as d}from"node:os";import{join as e}from"node:path";function g(t){return h("sha256").update(t).digest("hex").slice(0,12)}function x(t){let n=process.env.CLAUDE_CONFIG_DIR??e(d(),".claude");return e(n,"plugins","filid",g(t))}function m(t){return h("sha256").update(t).digest("hex").slice(0,12)}function f(t,n){let s=x(n),o=m(t),i=e(s,`session-context-${o}`),c=e(s,`cached-context-${o}`);try{u(i)&&a(i)}catch{}try{u(c)&&a(c)}catch{}}function p(t){let{cwd:n,session_id:s}=t;return f(s,n),{continue:!0}}var l=[];for await(let t of process.stdin)l.push(t);var y=Buffer.concat(l).toString("utf-8"),r;try{let t=JSON.parse(y);r=p(t)}catch{r={continue:!0}}process.stdout.write(JSON.stringify(r));
